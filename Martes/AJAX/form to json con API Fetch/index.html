<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Form to JSON con API Fetch</title>
</head>
<body>

    <form id="formulario" method="POST" action="respuesta.php">
        
        <ul>
            <li>codigo Usuario</li>
            <input type="text" name="RegistroCodUsuario" value="1234">
            
            <li>Apellido de Usuario</li>
            <input type="text" name="RegistroApellido" value="Wittbecker">
            
            <li>Nombre de usuario</li>
            <input type="text" name="RegistroNombre" value="Gus">
        </ul>

        <button type="submit">enviar form de manera tradicional</button>

    </form>

    <button id="disparar-ajax">Disparar requerimiento asincronico AJAX</button>

    <script>
        const botonAjax = document.getElementById('disparar-ajax');
        const formulario = document.getElementById('formulario');
        
        botonAjax.addEventListener('click', () => {
            
            const objDatosFormulario = new FormData(formulario);
            
            console.log("valor del input idUsuario: " + objDatosFormulario.get("RegistroCodUsuario"));

            const options = {
                method: 'POST',
                body: objDatosFormulario, 
            };
            
            fetch('respuesta.php', options)
                .then(respuesta => {
                    return respuesta.text(); 
                })
                .then(textoJson => {
                    alert(textoJson);
                })
                .catch(error => {
                    console.error('Error AJAX:', error);
                    alert('Error al obtener la respuesta del servidor.');
                });
        });
    </script>
</body>
</html>